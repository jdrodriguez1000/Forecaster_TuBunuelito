general:
  random_state: 42
  base_path: "."
  data_raw_path: "data/01_raw"
  data_cleansed_path: "data/02_cleansed"
  data_features_path: "data/03_features"
  data_processed_path: "data/04_processed"
  outputs_path: "outputs"
  tests_reports_path: "tests/reports"
  mode: "train" # Opciones: load, train, forecast

extractions:
  tables: ["ventas", "inventario", "finanzas", "marketing", "macroeconomia", "clima"]
  schemas:
    ventas:
      fecha: datetime
      unidades_totales: int
      unidades_pagas: int
      unidades_bonificadas: int
      es_promocion: int
      ads_activos: int
    inventario:
      fecha: datetime
      kit_inicial_bodega: int
      kit_recibido: int
      lbs_recibidas: int
      demanda_teorica_total: int
      buñuelos_preparados: int
      ventas_reales_totales: int
      ventas_reales_pagas: int
      ventas_reales_bonificadas: int
      buñuelos_desperdiciados: int
      unidades_agotadas: int
      kit_final_bodega: int
    finanzas:
      fecha: datetime
      precio_unitario: int
      costo_unitario: float
      margen_bruto: float
      porcentaje_margen: float
    marketing:
      fecha: datetime
      inversion_total: int
      ig_cost: int
      fb_cost: int
      ig_pct: float
      fb_pct: float
      campaña_activa: int
    macroeconomia:
      fecha: datetime
      smlv: int
      inflacion_mensual_ipc: float
      tasa_desempleo: float
      trm: float
    clima:
      fecha: datetime
      temperatura_media: float
      probabilidad_lluvia: float
      precipitacion_mm: float
      tipo_lluvia: object
      evento_macro: object
      es_dia_lluvioso: int
  sentinel_values:
    numeric: [-999, 9999, -1]
    object: ["N/A", "NULL", "NONE", "UNKNOWN", "MISSING", "SIN_DATO", "", " "]
    datetime: ["1900-01-01", "1700-01-01", "9999-12-31", "2099-12-31"]

preprocessing:
  target_column: "demanda_teorica_total"
  date_column: "fecha"

eda:
  target_variable: "demanda_teorica_total"
  splits:
    test_days: 185
    val_days: 185
  time_series:
    lags_acf_pacf: 40
  statistics:
    vif_threshold: 10
    vif_columns:
      - "smlv"
      - "inflacion_mensual_ipc"
      - "tasa_desempleo"
      - "trm"
      - "temperatura_media"
      - "probabilidad_lluvia"
      - "precipitacion_mm"
      - "inversion_total"
      - "ig_cost"
      - "fb_cost"
      - "precio_unitario"
      - "costo_unitario"
  business_rules:
    pandemic:
      start: "2020-05-01"
      end: "2021-04-30"
    promotions:
      cycle_1_months: [4, 5]
      cycle_2_months: [9, 10]
      start_year: 2022
    events:
      novenas:
        month: 12
        days: [16, 26]
      semana_santa:
        jueves_viernes_santo: true # Lógica interna para festivos móviles
      feria_flores:
        month: 8
        days: [1, 10]
    payments:
      quincenas: [15, 16, 30, 31]
      prima_legal:
        june: [15, 20]
        december: [15, 20]

features:
  lags: [1, 7, 14, 30]
  window_features: [7, 14, 30]
  exogenous_vars:
    - "es_dia_lluvioso"
    - "es_promocion"
    - "campaña_activa"
    - "smlv"
    - "trm"

modeling:
  strategy: "ForecasterDirect"
  random_state: 42
  models:
    - "Ridge"
    - "RandomForestRegressor"
    - "LGBMRegressor"
    - "XGBRegressor"
    - "GradientBoostingRegressor"
    - "HistGradientBoostingRegressor"
  test_size: 185

monitoring:
  drift_threshold: 0.05
  retrain_period: 30
